<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trucking Business Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // ===== CORE BUSINESS LOGIC =====

        function calculatePay(miles) {
            if (miles <= 20) return miles * 2.85;
            if (miles <= 75) return miles * 2.00;
            if (miles <= 150) return miles * 1.85;
            if (miles <= 275) return miles * 1.70;
            if (miles <= 425) return miles * 1.45;
            if (miles <= 600) return miles * 1.35;
            if (miles <= 800) return miles * 1.28;
            if (miles <= 1000) return miles * 1.25;
            if (miles <= 1200) return miles * 1.20;
            if (miles <= 1800) return miles * 1.13;
            return miles * 1.12;
        }

        // Helper function to get Wednesday-Tuesday settlement cycle boundaries
        function getSettlementCycleBoundaries(referenceDate = new Date()) {
            var now = new Date(referenceDate);
            var dayOfWeek = now.getDay(); // 0 = Sunday, 1 = Monday, ..., 6 = Saturday
            
            // Calculate days until next Tuesday (cycle end)
            var daysUntilTuesday = (2 - dayOfWeek + 7) % 7;
            
            var cycleEnd = new Date(now);
            cycleEnd.setDate(now.getDate() + daysUntilTuesday);
            cycleEnd.setHours(23, 59, 59, 999);
            
            var cycleStart = new Date(cycleEnd);
            cycleStart.setDate(cycleEnd.getDate() - 6);
            cycleStart.setHours(0, 0, 0, 0);
            
            return { start: cycleStart, end: cycleEnd };
        }

        // Helper function to calculate prorated fixed costs
        function getProratedFixedCosts(includeLease) {
            const FIXED_COSTS_WEEKLY = 277;
            const TRUCK_PAYMENT_WEEKLY = 835;
            
            var fullWeeklyCosts = FIXED_COSTS_WEEKLY + (includeLease ? TRUCK_PAYMENT_WEEKLY : 0);
            
            var cycleBoundaries = getSettlementCycleBoundaries();
            var now = new Date();
            var cycleStart = cycleBoundaries.start;
            var cycleEnd = cycleBoundaries.end;
            
            // If current time is before cycle start, we're in the previous cycle
            if (now < cycleStart) {
                var prevCycleEnd = new Date(cycleStart);
                prevCycleEnd.setMilliseconds(prevCycleEnd.getMilliseconds() - 1);
                var prevCycleStart = new Date(prevCycleEnd);
                prevCycleStart.setDate(prevCycleEnd.getDate() - 6);
                prevCycleStart.setHours(0, 0, 0, 0);
                cycleStart = prevCycleStart;
                cycleEnd = prevCycleEnd;
            }
            
            var totalCycleMs = cycleEnd.getTime() - cycleStart.getTime();
            var elapsedMs = Math.min(now.getTime() - cycleStart.getTime(), totalCycleMs);
            elapsedMs = Math.max(0, elapsedMs);
            
            var cycleProgress = elapsedMs / totalCycleMs;
            var proratedCosts = fullWeeklyCosts * cycleProgress;
            
            return {
                prorated: proratedCosts,
                full: fullWeeklyCosts,
                progress: cycleProgress
            };
        }

        // ===== GLOBAL VARIABLES =====

        var currentHistoryFilter = 'all';
        var weeklyGaugeChart = null;
        var incentiveGaugeChart = null;
        var currentEditingItem = null;
        var currentPLPeriod = 'current-month';

        // ===== INITIALIZATION =====

        document.addEventListener('DOMContentLoaded', function() {
            initializeWeeklyGauge();
            initializeIncentiveGauge();
            initializeEventListeners();
            checkBackupReminder();
            updateDisplay();
        });

        function initializeEventListeners() {
            // Set default dates to today
            document.getElementById('date').valueAsDate = new Date();
            document.getElementById('expenseDate').valueAsDate = new Date();

            // Miles input listener for real-time pay calculation
            document.getElementById('miles').addEventListener('input', function() {
                var miles = parseInt(this.value) || 0;
                var pay = calculatePay(miles);
                var rate = miles > 0 ? pay / miles : 0;
                document.getElementById('calculatedPay').textContent = pay.toFixed(2);
                document.getElementById('ratePerMile').textContent = rate.toFixed(3);
            });

            // Form submission listeners
            document.getElementById('loadForm').addEventListener('submit', function(e) {
                e.preventDefault();
                addLoad();
            });

            document.getElementById('expenseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                addExpense();
            });
        }

        // ===== DATA MANAGEMENT =====

        function loadData() {
            var loadsData = localStorage.getItem('loads');
            var expensesData = localStorage.getItem('expenses');
            return {
                loads: loadsData ? JSON.parse(loadsData) : [],
                expenses: expensesData ? JSON.parse(expensesData) : []
            };
        }

        function saveData(loads, expenses) {
            localStorage.setItem('loads', JSON.stringify(loads));
            localStorage.setItem('expenses', JSON.stringify(expenses));
        }

        // ===== TAB MANAGEMENT =====

        function showTab(tabName, element) {
            var contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            var tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            element.classList.add('active');

            if (tabName === 'history') {
                updateHistoryDisplay();
            } else if (tabName === 'pl') {
                updatePLDisplay();
            }
        }

        // ===== LOAD MANAGEMENT =====

        function addLoad() {
            var loadNumber = document.getElementById('loadNumber').value || '';
            var date = document.getElementById('date').value || '';
            var miles = parseInt(document.getElementById('miles').value) || 0;
            var origin = document.getElementById('origin').value || '';
            var destination = document.getElementById('destination').value || '';
            var notes = document.getElementById('notes').value || '';
            
            if (!date || miles <= 0) {
                alert('Please enter a valid date and miles');
                return;
            }
            
            var pay = calculatePay(miles);
            
            var load = {
                id: Date.now(),
                type: 'load',
                loadNumber: loadNumber,
                date: date,
                miles: miles,
                origin: origin,
                destination: destination,
                notes: notes,
                revenue: pay
            };
            
            var data = loadData();
            data.loads.unshift(load);
            saveData(data.loads, data.expenses);
            
            updateDisplay();
            clearForm();
            alert('Load added successfully!');
        }

        function clearForm() {
            document.getElementById('loadForm').reset();
            document.getElementById('date').valueAsDate = new Date();
            document.getElementById('calculatedPay').textContent = '0.00';
            document.getElementById('ratePerMile').textContent = '0.00';
        }

        // ===== EXPENSE MANAGEMENT =====

        function addExpense() {
            var date = document.getElementById('expenseDate').value || '';
            var category = document.getElementById('expenseCategory').value || '';
            var amount = parseFloat(document.getElementById('expenseAmount').value) || 0;
            var miles = document.getElementById('expenseMiles').value ? parseInt(document.getElementById('expenseMiles').value) : null;
            var notes = document.getElementById('expenseNotes').value || '';
            
            if (!date || !category || amount <= 0) {
                alert('Please fill in date, category, and amount');
                return;
            }
            
            var expense = {
                id: Date.now(),
                type: 'expense',
                date: date,
                category: category,
                amount: amount,
                miles: miles,
                notes: notes
            };
            
            var data = loadData();
            data.expenses.unshift(expense);
            saveData(data.loads, data.expenses);
            
            updateDisplay();
            clearExpenseForm();
            alert('Expense added successfully!');
        }

        function clearExpenseForm() {
            document.getElementById('expenseForm').reset();
            document.getElementById('expenseDate').valueAsDate = new Date();
        }

        // ===== EDIT FUNCTIONALITY =====

        function editItem(id, type) {
            var data = loadData();
            var item = null;
            
            if (type === 'load') {
                item = data.loads.find(load => load.id === id);
            } else {
                item = data.expenses.find(expense => expense.id === id);
            }
            
            if (!item) {
                alert('Item not found');
                return;
            }
            
            currentEditingItem = { item: item, type: type };
            showEditForm(item, type);
        }

        function showEditForm(item, type) {
            var historyContainer = document.getElementById('historyContainer');
            var editFormHtml = '';
            
            // Helper function to escape HTML attributes
            function escapeHtml(text) {
                if (!text) return '';
                return text.toString()
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(/"/g, '&quot;')
                    .replace(/'/g, '&#039;');
            }
            
            if (type === 'load') {
                editFormHtml = '<div class="edit-form" id="editForm">' +
                    '<h4>Edit Load #' + (item.loadNumber || 'N/A') + '</h4>' +
                    '<div class="form-grid">' +
                        '<div class="form-group">' +
                            '<label>Load Number</label>' +
                            '<input type="text" id="editLoadNumber" value="' + escapeHtml(item.loadNumber || '') + '" placeholder="Load/Dispatch #">' +
                        '</div>' +
                        '<div class="form-group">' +
                            '<label>Date</label>' +
                            '<input type="date" id="editDate" value="' + escapeHtml(item.date) + '" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                            '<label>Miles</label>' +
                            '<input type="number" id="editMiles" value="' + escapeHtml(item.miles) + '" min="1" required placeholder="Miles driven">' +
                        '</div>' +
                        '<div class="form-group">' +
                            '<label>Origin</label>' +
                            '<input type="text" id="editOrigin" value="' + escapeHtml(item.origin || '') + '" placeholder="Starting location">' +
                        '</div>' +
                        '<div class="form-group">' +
                            '<label>Destination</label>' +
                            '<input type="text" id="editDestination" value="' + escapeHtml(item.destination || '') + '" placeholder="Ending location">' +
                        '</div>' +
                    '</div>' +
                    '<div class="form-group">' +
                        '<label>Notes</label>' +
                        '<textarea id="editNotes" rows="2" placeholder="Additional details...">' + escapeHtml(item.notes || '') + '</textarea>' +
                    '</div>' +
                    '<button type="button" class="btn btn-success" onclick="saveEdit()">Save Changes</button>' +
                    '<button type="button" class="btn" onclick="cancelEdit()">Cancel</button>' +
                '</div>';
            } else {
                var categoryOptions = [
                    {value: '', text: 'Select Category'},
                    {value: 'fuel-tractor', text: 'Fuel - Tractor'},
                    {value: 'fuel-tax', text: 'Fuel Tax'},
                    {value: 'maintenance', text: 'Maintenance & Repairs'},
                    {value: 'parking-tolls', text: 'Parking, Scales & Tolls'},
                    {value: 'supplies', text: 'Supplies'},
                    {value: 'travel-lodging', text: 'Travel & Lodging'},
                    {value: 'truck-payment', text: 'Truck Payment'},
                    {value: 'insurance-physical', text: 'Insurance - Physical Damage'},
                    {value: 'insurance-bobtail', text: 'Insurance - Bobtail'},
                    {value: 'insurance-workcomp', text: 'Insurance - Work Comp'},
                    {value: 'other', text: 'Other'}
                ];
                
                var selectOptions = '';
                for (var i = 0; i < categoryOptions.length; i++) {
                    var option = categoryOptions[i];
                    var selected = (item.category === option.value) ? ' selected' : '';
                    selectOptions += '<option value="' + option.value + '"' + selected + '>' + option.text + '</option>';
                }
                
                editFormHtml = '<div class="edit-form" id="editForm">' +
                    '<h4>Edit Expense - ' + escapeHtml(item.category) + '</h4>' +
                    '<div class="form-grid">' +
                        '<div class="form-group">' +
                            '<label>Date</label>' +
                            '<input type="date" id="editExpenseDate" value="' + escapeHtml(item.date) + '" required>' +
                        '</div>' +
                        '<div class="form-group">' +
                            '<label>Category</label>' +
                            '<select id="editExpenseCategory" required>' + selectOptions + '</select>' +
                        '</div>' +
                        '<div class="form-group">' +
                            '<label>Amount ($)</label>' +
                            '<input type="number" id="editExpenseAmount" value="' + escapeHtml(item.amount) + '" min="0" step="0.01" required placeholder="0.00">' +
                        '</div>' +
                        '<div class="form-group">' +
                            '<label>Miles (if applicable)</label>' +
                            '<input type="number" id="editExpenseMiles" value="' + escapeHtml(item.miles || '') + '" min="0" placeholder="For per-mile expenses">' +
                        '</div>' +
                    '</div>' +
                    '<div class="form-group">' +
                        '<label>Description/Notes</label>' +
                        '<textarea id="editExpenseNotes" rows="2" placeholder="Additional details...">' + escapeHtml(item.notes || '') + '</textarea>' +
                    '</div>' +
                    '<button type="button" class="btn btn-success" onclick="saveEdit()">Save Changes</button>' +
                    '<button type="button" class="btn" onclick="cancelEdit()">Cancel</button>' +
                '</div>';
            }
            
            historyContainer.insertAdjacentHTML('afterbegin', editFormHtml);
            document.getElementById('editForm').scrollIntoView({ behavior: 'smooth' });
        }

        function saveEdit() {
            if (!currentEditingItem) return;
            
            var data = loadData();
            var item = currentEditingItem.item;
            var type = currentEditingItem.type;
            
            if (type === 'load') {
                var updatedLoad = {
                    ...item,
                    loadNumber: document.getElementById('editLoadNumber').value || '',
                    date: document.getElementById('editDate').value || '',
                    miles: parseInt(document.getElementById('editMiles').value) || 0,
                    origin: document.getElementById('editOrigin').value || '',
                    destination: document.getElementById('editDestination').value || '',
                    notes: document.getElementById('editNotes').value || ''
                };
                
                if (!updatedLoad.date || updatedLoad.miles <= 0) {
                    alert('Please enter a valid date and miles');
                    return;
                }
                
                updatedLoad.revenue = calculatePay(updatedLoad.miles);
                
                var loadIndex = data.loads.findIndex(load => load.id === item.id);
                if (loadIndex !== -1) {
                    data.loads[loadIndex] = updatedLoad;
                }
            } else {
                var updatedExpense = {
                    ...item,
                    date: document.getElementById('editExpenseDate').value || '',
                    category: document.getElementById('editExpenseCategory').value || '',
                    amount: parseFloat(document.getElementById('editExpenseAmount').value) || 0,
                    miles: document.getElementById('editExpenseMiles').value ? parseInt(document.getElementById('editExpenseMiles').value) : null,
                    notes: document.getElementById('editExpenseNotes').value || ''
                };
                
                if (!updatedExpense.date || !updatedExpense.category || updatedExpense.amount <= 0) {
                    alert('Please fill in date, category, and amount');
                    return;
                }
                
                var expenseIndex = data.expenses.findIndex(expense => expense.id === item.id);
                if (expenseIndex !== -1) {
                    data.expenses[expenseIndex] = updatedExpense;
                }
            }
            
            saveData(data.loads, data.expenses);
            cancelEdit();
            updateDisplay();
            alert('Changes saved successfully!');
        }

        function cancelEdit() {
            var editForm = document.getElementById('editForm');
            if (editForm) {
                editForm.remove();
            }
            currentEditingItem = null;
        }

        // ===== DELETE FUNCTIONALITY =====

        function deleteItem(id, type) {
            if (confirm('Are you sure you want to delete this ' + type + '?')) {
                var data = loadData();
                if (type === 'load') {
                    data.loads = data.loads.filter(function(item) { return item.id !== id; });
                } else {
                    data.expenses = data.expenses.filter(function(item) { return item.id !== id; });
                }
                saveData(data.loads, data.expenses);
                updateDisplay();
            }
        }

        // ===== HISTORY DISPLAY =====

        function showHistoryType(type, element) {
            currentHistoryFilter = type;
            document.querySelectorAll('#history button.btn').forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');
            updateHistoryDisplay();
        }

        function updateHistoryDisplay() {
            var data = loadData();
            var historyContainer = document.getElementById('historyContainer');
            const VARIABLE_COST_PER_MILE = 0.372;
            
            // Remove any existing edit form
            var existingEditForm = document.getElementById('editForm');
            if (existingEditForm) {
                existingEditForm.remove();
            }
            
            var items = [];
            
            if (currentHistoryFilter === 'loads' || currentHistoryFilter === 'all') {
                items = items.concat(data.loads);
            }
            if (currentHistoryFilter === 'expenses' || currentHistoryFilter === 'all') {
                items = items.concat(data.expenses);
            }
            
            items.sort(function(a, b) {
                return new Date(b.date) - new Date(a.date);
            });
            
            if (items.length === 0) {
                historyContainer.innerHTML = '<p>No records found. Add some loads and expenses!</p>';
                return;
            }
            
            var htmlContent = '';
            
            for (var i = 0; i < items.length; i++) {
                var item = items[i];
                
                if (item.type === 'load') {
                    var loadNumber = item.loadNumber || '';
                    var origin = item.origin || 'N/A';
                    var destination = item.destination || 'N/A';
                    var notes = item.notes || '';
                    var miles = item.miles || 0;
                    var revenue = item.revenue || 0;
                    var revenuePerMile = miles > 0 ? (revenue / miles) : 0;
                    var costPerMile = miles > 0 ? VARIABLE_COST_PER_MILE : 0;
                    var profitPerMile = revenuePerMile - costPerMile;

                    htmlContent += `<div class="history-item">`;
                    htmlContent += `<div class="action-buttons">`;
                    htmlContent += `<button class="edit-btn" onclick="editItem(${item.id}, 'load')">Edit</button>`;
                    htmlContent += `<button class="delete-btn" onclick="deleteItem(${item.id}, 'load')">Delete</button>`;
                    htmlContent += `</div>`;
                    htmlContent += `<h3>Load - ${new Date(item.date).toLocaleDateString()}`;
                    if (loadNumber) {
                        htmlContent += `<span class="order-highlight">#${loadNumber}</span>`;
                    }
                    htmlContent += `</h3>`;
                    htmlContent += `<div class="details">`;
                    htmlContent += `<div class="detail-item"><strong>${miles}</strong><span>Miles</span></div>`;
                    htmlContent += `<div class="detail-item"><strong>${revenue.toFixed(2)}</strong><span>Revenue</span></div>`;
                    htmlContent += `<div class="detail-item"><strong>${revenuePerMile.toFixed(3)}</strong><span>Revenue/Mile</span></div>`;
                    htmlContent += `<div class="detail-item"><strong>${costPerMile.toFixed(3)}</strong><span>Var. Cost/Mile</span></div>`;
                    htmlContent += `<div class="detail-item"><strong>${profitPerMile.toFixed(3)}</strong><span>Profit/Mile</span></div>`;
                    htmlContent += `</div>`;
                    if (origin !== 'N/A' || destination !== 'N/A') {
                        htmlContent += `<p><strong>Route:</strong> ${origin} to ${destination}</p>`;
                    }
                    if (notes) {
                        htmlContent += `<p><strong>Notes:</strong> ${notes}</p>`;
                    }
                    htmlContent += `</div>`;
                } else {
                    var categoryName = item.category || '';
                    var notes = item.notes || '';
                    var amount = item.amount || 0;
                    var miles = item.miles || 0;
                    
                    htmlContent += `<div class="history-item expense-item">`;
                    htmlContent += `<div class="action-buttons">`;
                    htmlContent += `<button class="edit-btn" onclick="editItem(${item.id}, 'expense')">Edit</button>`;
                    htmlContent += `<button class="delete-btn" onclick="deleteItem(${item.id}, 'expense')">Delete</button>`;
                    htmlContent += `</div>`;
                    htmlContent += `<h3>Expense - ${new Date(item.date).toLocaleDateString()}`;
                    htmlContent += `</h3>`;
                    htmlContent += `<div class="details">`;
                    htmlContent += `<div class="detail-item"><strong>${categoryName}</strong><span>Category</span></div>`;
                    htmlContent += `<div class="detail-item"><strong>${amount.toFixed(2)}</strong><span>Amount</span></div>`;
                    if (miles > 0) {
                        htmlContent += `<div class="detail-item"><strong>${miles}</strong><span>Miles</span></div>`;
                        htmlContent += `<div class="detail-item"><strong>${(amount / miles).toFixed(3)}</strong><span>Per Mile</span></div>`;
                    }
                    htmlContent += `</div>`;
                    if (notes) {
                        htmlContent += `<p><strong>Notes:</strong> ${notes}</p>`;
                    }
                    htmlContent += `</div>`;
                }
            }
            
            historyContainer.innerHTML = htmlContent;
        }

        // ===== CHART INITIALIZATION =====

        function initializeWeeklyGauge() {
            const ctx = document.getElementById('weeklyGaugeCanvas').getContext('2d');
            weeklyGaugeChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Loss', 'Profit'],
                    datasets: [{
                        data: [50, 50],
                        backgroundColor: ['#e74c3c', '#27ae60'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    rotation: -90,
                    circumference: 180,
                    cutout: '80%',
                    plugins: {
                        tooltip: { enabled: false },
                        legend: { display: false }
                    }
                }
            });
        }

        function initializeIncentiveGauge() {
            const ctx = document.getElementById('incentiveGaugeCanvas').getContext('2d');
            incentiveGaugeChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['0-3999', '4000-5999', '6000-7999', '8000+'],
                    datasets: [{
                        data: [3999, 2000, 2000, 2000],
                        backgroundColor: ['#dcdcdc', '#f1c40f', '#27ae60', '#3498db'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    rotation: -90,
                    circumference: 180,
                    cutout: '80%',
                    plugins: {
                        tooltip: { enabled: false },
                        legend: { display: false }
                    }
                }
            });
        }

        // ===== MAIN UPDATE FUNCTION =====

        function updateDisplay() {
            var data = loadData();
            
            var totalRevenue = data.loads.reduce((sum, load) => sum + (load.revenue || 0), 0);
            var totalMiles = data.loads.reduce((sum, load) => sum + (load.miles || 0), 0);
            var totalLoads = data.loads.length;

            const VARIABLE_COST_PER_MILE = 0.372;
            const FIXED_COSTS_WEEKLY = 277;
            const TRUCK_PAYMENT_WEEKLY = 835;
            
            var calculatedFixedCosts = FIXED_COSTS_WEEKLY;
            var includeLease = document.getElementById('includeLease').checked;
            if(includeLease) {
                calculatedFixedCosts += TRUCK_PAYMENT_WEEKLY;
            }

            var calculatedVariableCosts = totalMiles * VARIABLE_COST_PER_MILE;
            var manuallyEnteredExpenses = data.expenses.reduce((sum, expense) => sum + (expense.amount || 0), 0);
            var overallTotalCosts = calculatedFixedCosts + calculatedVariableCosts + manuallyEnteredExpenses;
            var overallNetProfit = totalRevenue - overallTotalCosts;
            var avgCPM = totalMiles > 0 ? overallTotalCosts / totalMiles : 0;
            var avgProfitPerMile = totalMiles > 0 ? overallNetProfit / totalMiles : 0;
            
            if (data.loads.length === 0 && data.expenses.length === 0) {
                document.getElementById('totalRevenue').textContent = '$0.00';
                document.getElementById('totalExpenses').textContent = '$0.00';
                document.getElementById('netProfit').textContent = '$0.00';
                document.getElementById('totalMiles').textContent = '0';
                document.getElementById('totalLoads').textContent = '0';
                document.getElementById('avgCPM').textContent = '$0.000';
                document.getElementById('avgProfitPerMile').textContent = '$0.000';
            } else {
                document.getElementById('totalRevenue').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + totalRevenue.toFixed(2);
                document.getElementById('totalExpenses').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + overallTotalCosts.toFixed(2);
                document.getElementById('netProfit').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + overallNetProfit.toFixed(2);
                document.getElementById('totalMiles').textContent = totalMiles.toLocaleString();
                document.getElementById('totalLoads').textContent = totalLoads;
                document.getElementById('avgCPM').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + avgCPM.toFixed(3);
                document.getElementById('avgProfitPerMile').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + avgProfitPerMile.toFixed(3);
            }

            var profitCard = document.getElementById('netProfit').parentElement;
            if (overallNetProfit >= 0) {
                profitCard.className = 'stat-card profit';
            } else {
                profitCard.className = 'stat-card expense';
            }
            
            updateHistoryDisplay();
            updateWeeklyGauge();
            updateIncentiveGauge();
            updatePayCyclePreview();
            updatePLDisplay();
        }

        // ===== GAUGE UPDATES =====

        function updateWeeklyGauge() {
            if (!weeklyGaugeChart) initializeWeeklyGauge();

            var data = loadData();
            const VARIABLE_COST_PER_MILE = 0.372;
            
            var includeLease = document.getElementById('includeLease').checked;
            
            // Get current settlement cycle boundaries
            var cycleBoundaries = getSettlementCycleBoundaries();
            var cycleStart = cycleBoundaries.start;
            var cycleEnd = cycleBoundaries.end;
            
            // Filter loads for current settlement cycle
            var weeklyRevenue = data.loads.filter(load => {
                var loadDate = new Date(load.date);
                return loadDate >= cycleStart && loadDate <= cycleEnd;
            }).reduce((sum, load) => sum + (load.revenue || 0), 0);

            var weeklyMiles = data.loads.filter(load => {
                var loadDate = new Date(load.date);
                return loadDate >= cycleStart && loadDate <= cycleEnd;
            }).reduce((sum, load) => sum + (load.miles || 0), 0);

            // Calculate prorated fixed costs
            var fixedCostInfo = getProratedFixedCosts(includeLease);
            var totalVariableCosts = weeklyMiles * VARIABLE_COST_PER_MILE;
            
            // For weekly expenses, only include expenses within the current cycle
            var weeklyManualExpenses = data.expenses.filter(expense => {
                var expenseDate = new Date(expense.date);
                return expenseDate >= cycleStart && expenseDate <= cycleEnd;
            }).reduce((sum, expense) => sum + (expense.amount || 0), 0);
            
            var totalWeeklyCosts = fixedCostInfo.prorated + totalVariableCosts + weeklyManualExpenses;
            var weeklyProfit = weeklyRevenue - totalWeeklyCosts;
            
            let gaugeValue = 0;
            const MAX_GAUGE_RANGE = 2000;

            if (weeklyProfit <= 0) {
                if (totalWeeklyCosts > 0) {
                    gaugeValue = Math.min(100, Math.max(0, (weeklyRevenue / totalWeeklyCosts) * 50));
                } else {
                    gaugeValue = 0;
                }
                weeklyGaugeChart.data.datasets[0].data = [gaugeValue, 100 - gaugeValue];
                weeklyGaugeChart.data.datasets[0].backgroundColor = [`#e74c3c`, '#dcdcdc'];
            } else {
                let profitRatio = Math.min(weeklyProfit / MAX_GAUGE_RANGE, 1);
                gaugeValue = 50 + (profitRatio * 50);
                weeklyGaugeChart.data.datasets[0].data = [50, gaugeValue - 50, 100 - gaugeValue];
                weeklyGaugeChart.data.datasets[0].backgroundColor = [`#e74c3c`, `#27ae60`, '#dcdcdc'];
            }

            weeklyGaugeChart.update();

            document.getElementById('weeklyRevenue').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + weeklyRevenue.toFixed(2);
            document.getElementById('totalFixedCosts').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + fixedCostInfo.prorated.toFixed(2);
            document.getElementById('totalWeeklyCosts').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + totalWeeklyCosts.toFixed(2);
            document.getElementById('weeklyProfit').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + weeklyProfit.toFixed(2);
        }

        function updateIncentiveGauge() {
            if (!incentiveGaugeChart) initializeIncentiveGauge();

            var data = loadData();
            var now = new Date();
            
            // Get current calendar month miles (from 1st of month to today)
            var monthStart = new Date(now.getFullYear(), now.getMonth(), 1);
            var monthMiles = data.loads.filter(load => {
                var loadDate = new Date(load.date);
                return loadDate >= monthStart && loadDate <= now;
            }).reduce((sum, load) => sum + (load.miles || 0), 0);

            let milesToNextTier = 0;
            let incentiveRate = 0;
            let totalMilesForGauge = 8000;
            
            let slice1 = 0, slice2 = 0, slice3 = 0, slice4 = 0, remaining = 0;
            let tiers = [4000, 6000, 8000];

            if (monthMiles >= tiers[2]) {
                incentiveRate = 0.07;
                milesToNextTier = 0;
                slice1 = tiers[0];
                slice2 = tiers[1] - tiers[0];
                slice3 = tiers[2] - tiers[1];
                slice4 = monthMiles - tiers[2];
            } else if (monthMiles >= tiers[1]) {
                incentiveRate = 0.06;
                milesToNextTier = tiers[2] - monthMiles;
                slice1 = tiers[0];
                slice2 = tiers[1] - tiers[0];
                slice3 = monthMiles - tiers[1];
                remaining = totalMilesForGauge - monthMiles;
            } else if (monthMiles >= tiers[0]) {
                incentiveRate = 0.05;
                milesToNextTier = tiers[1] - monthMiles;
                slice1 = tiers[0];
                slice2 = monthMiles - tiers[0];
                remaining = totalMilesForGauge - monthMiles;
            } else {
                incentiveRate = 0.00;
                milesToNextTier = tiers[0] - monthMiles;
                slice1 = monthMiles;
                remaining = totalMilesForGauge - monthMiles;
            }

            incentiveGaugeChart.data.datasets[0].data = [slice1, slice2, slice3, slice4, remaining];
            incentiveGaugeChart.data.datasets[0].backgroundColor = [`#dcdcdc`, `#f1c40f`, `#27ae60`, `#3498db`, `#ffffff`];
            incentiveGaugeChart.update();
            
            var totalIncentivePay = monthMiles * incentiveRate;
            document.getElementById('monthMiles').textContent = monthMiles.toLocaleString();
            document.getElementById('incentiveRate').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + incentiveRate.toFixed(2);
            document.getElementById('milesToNextTier').textContent = milesToNextTier.toLocaleString();
            document.getElementById('totalIncentivePay').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + totalIncentivePay.toFixed(2);
        }

        function updatePayCyclePreview() {
            var data = loadData();
            const VARIABLE_COST_PER_MILE = 0.372;
            
            // Get current settlement cycle boundaries
            var currentCycleBoundaries = getSettlementCycleBoundaries();
            
            // Calculate next cycle boundaries
            var nextCycleStart = new Date(currentCycleBoundaries.end);
            nextCycleStart.setDate(nextCycleStart.getDate() + 1);
            nextCycleStart.setHours(0, 0, 0, 0);
            var nextCycleEnd = new Date(nextCycleStart);
            nextCycleEnd.setDate(nextCycleEnd.getDate() + 6);
            nextCycleEnd.setHours(23, 59, 59, 999);

            var currentCycleRevenue = 0;
            var currentCycleMiles = 0;
            var nextCycleRevenue = 0;
            var nextCycleMiles = 0;

            data.loads.forEach(load => {
                var loadDate = new Date(load.date);
                if (loadDate >= currentCycleBoundaries.start && loadDate <= currentCycleBoundaries.end) {
                    currentCycleRevenue += load.revenue || 0;
                    currentCycleMiles += load.miles || 0;
                } else if (loadDate >= nextCycleStart && loadDate <= nextCycleEnd) {
                    nextCycleRevenue += load.revenue || 0;
                    nextCycleMiles += load.miles || 0;
                }
            });

            // Calculate variable costs and profit for each cycle
            var currentCycleVariableCosts = currentCycleMiles * VARIABLE_COST_PER_MILE;
            var currentCycleProfit = currentCycleRevenue - currentCycleVariableCosts;
            
            var nextCycleVariableCosts = nextCycleMiles * VARIABLE_COST_PER_MILE;
            var nextCycleProfit = nextCycleRevenue - nextCycleVariableCosts;

            document.getElementById('currentCycleRevenue').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + currentCycleRevenue.toFixed(2);
            document.getElementById('currentCycleMiles').textContent = currentCycleMiles.toLocaleString();
            document.getElementById('currentCycleVariableCosts').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + currentCycleVariableCosts.toFixed(2);
            document.getElementById('currentCycleProfit').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + currentCycleProfit.toFixed(2);
            
            document.getElementById('nextCycleRevenue').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + nextCycleRevenue.toFixed(2);
            document.getElementById('nextCycleMiles').textContent = nextCycleMiles.toLocaleString();
            document.getElementById('nextCycleVariableCosts').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + nextCycleVariableCosts.toFixed(2);
            document.getElementById('nextCycleProfit').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + nextCycleProfit.toFixed(2);
        }

        // ===== DATA EXPORT/IMPORT =====

        function exportData() {
            var data = loadData();
            var exportData = {
                loads: data.loads,
                expenses: data.expenses,
                exportDate: new Date().toISOString()
            };
            var dataStr = JSON.stringify(exportData, null, 2);
            var dataBlob = new Blob([dataStr], {type: 'application/json'});
            var url = URL.createObjectURL(dataBlob);
            var link = document.createElement('a');
            link.href = url;
            link.download = 'trucking-data-' + new Date().toISOString().split('T')[0] + '.json';
            link.click();
            URL.revokeObjectURL(url);
            localStorage.setItem('lastExportDate', new Date().toISOString());
        }

        function importData(event) {
            var file = event.target.files[0];
            if (!file) return;
            
            var reader = new FileReader();
            reader.onload = function(e) {
                try {
                    var importedData = JSON.parse(e.target.result);
                    if (importedData.loads && importedData.expenses) {
                        if (confirm('This will replace all existing data. Continue?')) {
                            saveData(importedData.loads, importedData.expenses);
                            updateDisplay();
                            alert('Data imported successfully!');
                        }
                    } else {
                        alert('Invalid file format');
                    }
                } catch (error) {
                    alert('Error reading file');
                }
            };
            reader.readAsText(file);
            event.target.value = '';
        }

        function clearAllData() {
            if (confirm('Are you sure you want to delete ALL data? This cannot be undone.')) {
                if (confirm('Last chance - this will permanently delete everything!')) {
                    localStorage.removeItem('loads');
                    localStorage.removeItem('expenses');
                    updateDisplay();
                    alert('All data cleared');
                }
            }
        }

        function showRawData() {
            var data = loadData();
            var formattedData = JSON.stringify(data, null, 2);
            document.getElementById('dataDisplayArea').textContent = formattedData;
        }

        // ===== BACKUP REMINDER SYSTEM =====

        function checkBackupReminder() {
            var lastExportDate = localStorage.getItem('lastExportDate');
            var now = new Date();
            
            if (!lastExportDate) {
                // First time user - set last export to now, no reminder yet
                localStorage.setItem('lastExportDate', now.toISOString());
                return;
            }
            
            var daysSinceExport = (now - new Date(lastExportDate)) / (1000 * 60 * 60 * 24);
            
            if (daysSinceExport >= 30) {
                setTimeout(function() {
                    showBackupReminder();
                }, 2000); // Show after 2 seconds to not interrupt initial load
            }
        }

        function showBackupReminder() {
            var shouldExport = confirm(
                "📱 Backup Reminder\n\n" +
                "It's been 30+ days since your last data export.\n\n" +
                "Would you like to backup your trucking data now?\n\n" +
                "This saves your loads and expenses to your device so you don't lose your records."
            );
            
            if (shouldExport) {
                exportData();
            } else {
                // Ask again in 7 days
                var nextReminder = new Date();
                nextReminder.setDate(nextReminder.getDate() - 23); // 30-7=23 days ago
                localStorage.setItem('lastExportDate', nextReminder.toISOString());
            }
        }

        // ===== PROFIT & LOSS FUNCTIONALITY =====

        function showPLPeriod(period, element) {
            currentPLPeriod = period;
            document.querySelectorAll('#pl button.btn').forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');
            updatePLDisplay();
        }

        function getPLDateRange(period) {
            var now = new Date();
            var start, end, title;
            
            switch(period) {
                case 'current-month':
                    start = new Date(now.getFullYear(), now.getMonth(), 1);
                    end = new Date(now.getFullYear(), now.getMonth() + 1, 0);
                    title = now.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
                    break;
                    
                case 'last-month':
                    start = new Date(now.getFullYear(), now.getMonth() - 1, 1);
                    end = new Date(now.getFullYear(), now.getMonth(), 0);
                    title = start.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
                    break;
                    
                case 'ytd':
                    start = new Date(now.getFullYear(), 0, 1);
                    end = now;
                    title = now.getFullYear() + ' Year to Date';
                    break;
                    
                default:
                    start = new Date(now.getFullYear(), now.getMonth(), 1);
                    end = new Date(now.getFullYear(), now.getMonth() + 1, 0);
                    title = now.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            }
            
            return { start, end, title };
        }

        function updatePLDisplay() {
            var data = loadData();
            const VARIABLE_COST_PER_MILE = 0.372;
            
            var dateRange = getPLDateRange(currentPLPeriod);
            var start = dateRange.start;
            var end = dateRange.end;
            
            // Filter data for the selected period
            var periodLoads = data.loads.filter(load => {
                var loadDate = new Date(load.date);
                return loadDate >= start && loadDate <= end;
            });
            
            var periodExpenses = data.expenses.filter(expense => {
                var expenseDate = new Date(expense.date);
                return expenseDate >= start && expenseDate <= end;
            });
            
            // Calculate revenue
            var loadRevenue = periodLoads.reduce((sum, load) => sum + (load.revenue || 0), 0);
            var totalMiles = periodLoads.reduce((sum, load) => sum + (load.miles || 0), 0);
            
            // Calculate incentive pay based on period
            var incentivePay = 0;
            if (currentPLPeriod === 'current-month') {
                // Use current month miles for incentive calculation
                var monthStart = new Date(new Date().getFullYear(), new Date().getMonth(), 1);
                var monthMiles = data.loads.filter(load => {
                    var loadDate = new Date(load.date);
                    return loadDate >= monthStart && loadDate <= new Date();
                }).reduce((sum, load) => sum + (load.miles || 0), 0);
                
                var incentiveRate = 0;
                if (monthMiles >= 8000) incentiveRate = 0.07;
                else if (monthMiles >= 6000) incentiveRate = 0.06;
                else if (monthMiles >= 4000) incentiveRate = 0.05;
                
                incentivePay = monthMiles * incentiveRate;
            }
            
            var totalRevenue = loadRevenue + incentivePay;
            
            // Calculate costs
            var variableCosts = totalMiles * VARIABLE_COST_PER_MILE;
            var grossProfit = totalRevenue - variableCosts;
            
            // Calculate period-based fixed costs
            var periodDays = Math.ceil((end - start) / (1000 * 60 * 60 * 24));
            var weeksInPeriod = periodDays / 7;
            
            var fixedCosts = 277 * weeksInPeriod;
            var truckPayment = 835 * weeksInPeriod;
            var manualExpenses = periodExpenses.reduce((sum, expense) => sum + (expense.amount || 0), 0);
            
            var totalOperatingExpenses = fixedCosts + truckPayment + manualExpenses;
            var netProfit = grossProfit - totalOperatingExpenses;
            
            // Calculate metrics
            var profitPerMile = totalMiles > 0 ? netProfit / totalMiles : 0;
            var profitMargin = totalRevenue > 0 ? (netProfit / totalRevenue) * 100 : 0;
            var revenuePerMile = totalMiles > 0 ? totalRevenue / totalMiles : 0;
            var totalCosts = variableCosts + totalOperatingExpenses;
            var costPerMile = totalMiles > 0 ? totalCosts / totalMiles : 0;
            
            // Update display
            document.getElementById('plPeriodTitle').textContent = dateRange.title;
            document.getElementById('plLoadRevenue').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + loadRevenue.toFixed(2);
            document.getElementById('plIncentivePay').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + incentivePay.toFixed(2);
            document.getElementById('plTotalRevenue').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + totalRevenue.toFixed(2);
            
            document.getElementById('plTotalMiles').textContent = totalMiles.toLocaleString();
            document.getElementById('plVariableCosts').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + variableCosts.toFixed(2);
            document.getElementById('plGrossProfit').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + grossProfit.toFixed(2);
            
            document.getElementById('plFixedCosts').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + fixedCosts.toFixed(2);
            document.getElementById('plTruckPayment').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + truckPayment.toFixed(2);
            document.getElementById('plManualExpenses').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + manualExpenses.toFixed(2);
            
            document.getElementById('plNetProfit').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + netProfit.toFixed(2);
            
            document.getElementById('plProfitPerMile').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + profitPerMile.toFixed(3);
            document.getElementById('plProfitMargin').textContent = profitMargin.toFixed(1) + '%';
            document.getElementById('plRevenuePerMile').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + revenuePerMile.toFixed(3);
            document.getElementById('plCostPerMile').textContent = '
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> + costPerMile.toFixed(3);
            
            // Color code net profit
            var netProfitElement = document.getElementById('plNetProfit');
            if (netProfit >= 0) {
                netProfitElement.style.color = '#27ae60';
            } else {
                netProfitElement.style.color = '#e74c3c';
            }
        }
    </script>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .stat-card.profit {
            border-left-color: #27ae60;
        }

        .stat-card.expense {
            border-left-color: #e74c3c;
        }

        .stat-card h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
        }

        .gauge-container {
            padding: 20px;
            background: #f8f9fa;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .gauge-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .gauge-card h2 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .lease-toggle {
            margin: -10px 0 20px;
            text-align: center;
        }

        .lease-toggle input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .gauge-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 30px;
        }

        .gauge-info-item {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background: #f1f2f6;
        }

        .gauge-info-item p {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .gauge-info-item strong {
            font-size: 1.2em;
            color: #2c3e50;
        }
        
        .main-content {
            padding: 20px;
        }

        .tabs {
            display: flex;
            background: #f1f2f6;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .pay-summary {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .pay-summary h3 {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .history-item.expense-item {
            border-left-color: #e74c3c;
        }

        .history-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .history-item .details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .detail-item strong {
            display: block;
            color: #2c3e50;
            font-size: 1em;
        }

        .detail-item span {
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .action-buttons {
            float: right;
            display: flex;
            gap: 5px;
        }

        .edit-btn, .delete-btn {
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .edit-btn {
            background: #f39c12;
        }

        .edit-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .order-highlight {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }

        .rate-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }

        .rate-table th, .rate-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .rate-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .rate-table tr:hover {
            background: #f8f9fa;
        }

        #dataDisplayArea {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 20px;
            overflow: auto;
            max-height: 500px;
            text-align: left;
        }

        .pay-cycle-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pay-cycle-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .pay-cycle-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-cycle-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pay-cycle-stat p {
            color: #7f8c8d;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .pay-cycle-stat strong {
            color: #2c3e50;
            font-size: 1.1em;
        }

        /* Edit Form Styles */
        .edit-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }

        .edit-form h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .edit-form .form-group {
            margin-bottom: 10px;
        }

        .edit-form label {
            font-size: 0.8em;
            margin-bottom: 3px;
        }

        .edit-form input, .edit-form textarea, .edit-form select {
            font-size: 13px;
            padding: 8px;
        }

        @media (max-width: 480px) {
            .container {
                margin: 2px;
                border-radius: 8px;
            }
            
            .header {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.4em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-card h3 {
                font-size: 1.1em;
            }
            
            .stat-card p {
                font-size: 0.8em;
            }

            .gauge-container {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 15px;
            }
            
            .gauge-card {
                padding: 15px;
            }
            
            .gauge-card h2 {
                font-size: 1.2em;
            }
            
            .gauge-info {
                grid-template-columns: 1fr 1fr;
                gap: 5px;
            }
            
            .gauge-info-item {
                padding: 6px;
            }
            
            .gauge-info-item p {
                font-size: 0.7em;
            }
            
            .gauge-info-item strong {
                font-size: 1em;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .tabs {
                margin-bottom: 15px;
                padding: 2px;
            }
            
            .tab {
                padding: 10px 8px;
                font-size: 0.85em;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 15px;
            }
            
            .section {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .section h2 {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-group input, .form-group textarea, .form-group select {
                padding: 8px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                margin-right: 5px;
                margin-bottom: 8px;
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .pay-cycle-card {
                padding: 12px;
            }
            
            .pay-cycle-card h3 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .pay-cycle-stat {
                padding: 8px;
            }
            
            .pay-cycle-stat p {
                font-size: 0.8em;
            }
            
            .pay-cycle-stat strong {
                font-size: 1em;
            }
            
            .history-item {
                padding: 10px;
            }
            
            .history-item h3 {
                font-size: 1em;
                margin-bottom: 8px;
            }
            
            .details {
                grid-template-columns: repeat(2, 1fr);
                gap: 5px;
            }
            
            .detail-item {
                padding: 6px;
            }
            
            .detail-item strong {
                font-size: 0.9em;
            }
            
            .detail-item span {
                font-size: 0.7em;
            }
            
            .action-buttons {
                position: static;
                float: none;
                margin-bottom: 8px;
                display: flex;
                gap: 5px;
            }
            
            .edit-btn, .delete-btn {
                padding: 4px 8px;
                font-size: 10px;
            }
            
            .edit-form {
                padding: 12px;
                margin-top: 10px;
            }
            
            .edit-form h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }
            
            .edit-form .form-grid {
                grid-template-columns: 1fr;
            }
            
            .rate-table {
                font-size: 0.8em;
            }
            
            .rate-table th, .rate-table td {
                padding: 6px;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.6em;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
                padding: 15px;
            }

            .gauge-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .pay-cycle-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trucking Business Tracker</h1>
            <p>Track loads, miles, revenue, expenses, and calculate real profit</p>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <h3 id="totalRevenue">$0.00</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card expense">
                <h3 id="totalExpenses">$0.00</h3>
                <p>Total Expenses</p>
            </div>
            <div class="stat-card profit">
                <h3 id="netProfit">$0.00</h3>
                <p>Net Profit</p>
            </div>
            <div class="stat-card">
                <h3 id="totalMiles">0</h3>
                <p>Total Miles</p>
            </div>
            <div class="stat-card">
                <h3 id="totalLoads">0</h3>
                <p>Total Loads</p>
            </div>
            <div class="stat-card">
                <h3 id="avgCPM">$0.00</h3>
                <p>Avg. CPM</p>
            </div>
            <div class="stat-card">
                <h3 id="avgProfitPerMile">$0.00</h3>
                <p>Avg Profit/Mile</p>
            </div>
        </div>

        <div class="gauge-container">
            <div class="gauge-card">
                <h2>Weekly Revenue Status</h2>
                <div style="height: 150px;">
                    <canvas id="weeklyGaugeCanvas"></canvas>
                </div>
                <div class="lease-toggle">
                    <input type="checkbox" id="includeLease" checked onchange="updateDisplay()">
                    <label for="includeLease" style="display: inline;">Include this week's truck payment? ($835)</label>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Weekly Revenue:</p>
                        <strong id="weeklyRevenue">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Fixed Costs:</p>
                        <strong id="totalFixedCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Weekly Costs:</p>
                        <strong id="totalWeeklyCosts">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Weekly Profit:</p>
                        <strong id="weeklyProfit">$0.00</strong>
                    </div>
                </div>
            </div>

            <div class="gauge-card">
                <h2>Monthly Incentive Status</h2>
                <div style="height: 150px;">
                    <canvas id="incentiveGaugeCanvas"></canvas>
                </div>
                <div class="gauge-info">
                    <div class="gauge-info-item">
                        <p>Month Miles:</p>
                        <strong id="monthMiles">0</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Incentive Rate:</p>
                        <strong id="incentiveRate">$0.00</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Next Tier at:</p>
                        <strong id="milesToNextTier">4000</strong>
                    </div>
                    <div class="gauge-info-item">
                        <p>Total Incentive Pay:</p>
                        <strong id="totalIncentivePay">$0.00</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showTab('load', this)">Add Load</button>
                <button class="tab" onclick="showTab('expenses', this)">Add Expenses</button>
                <button class="tab" onclick="showTab('pay-cycle', this)">Pay Cycle</button>
                <button class="tab" onclick="showTab('pl', this)">P&L</button>
                <button class="tab" onclick="showTab('rates', this)">Rates</button>
                <button class="tab" onclick="showTab('history', this)">History</button>
                <button class="tab" onclick="showTab('data', this)">Data</button>
            </div>

            <div id="load" class="tab-content active">
                <div class="section">
                    <h2>Add New Load</h2>
                    <form id="loadForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loadNumber">Load Number</label>
                                <input type="text" id="loadNumber" name="loadNumber" placeholder="Load/Dispatch #">
                            </div>
                            
                            <div class="form-group">
                                <label for="date">Load Drop Date</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="miles">Load Miles</label>
                                <input type="number" id="miles" name="miles" min="1" required placeholder="Miles driven">
                            </div>
                            
                            <div class="form-group">
                                <label for="origin">Origin</label>
                                <input type="text" id="origin" name="origin" placeholder="Starting location">
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination</label>
                                <input type="text" id="destination" name="destination" placeholder="Ending location">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notes">Notes</label>
                            <textarea id="notes" name="notes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pay-summary" id="paySummary">
                            <h3>Revenue: $<span id="calculatedPay">0.00</span></h3>
                            <p>Rate: $<span id="ratePerMile">0.00</span>/mile</p>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Load</button>
                        <button type="button" class="btn" onclick="clearForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="expenses" class="tab-content">
                <div class="section">
                    <h2>Add Business Expenses</h2>
                    <form id="expenseForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="expenseDate">Date</label>
                                <input type="date" id="expenseDate" name="expenseDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseCategory">Category</label>
                                <select id="expenseCategory" name="expenseCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="fuel-tractor">Fuel - Tractor</option>
                                    <option value="fuel-tax">Fuel Tax</option>
                                    <option value="maintenance">Maintenance & Repairs</option>
                                    <option value="parking-tolls">Parking, Scales & Tolls</option>
                                    <option value="supplies">Supplies</option>
                                    <option value="travel-lodging">Travel & Lodging</option>
                                    <option value="truck-payment">Truck Payment</option>
                                    <option value="insurance-physical">Insurance - Physical Damage</option>
                                    <option value="insurance-bobtail">Insurance - Bobtail</option>
                                    <option value="insurance-workcomp">Insurance - Work Comp</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseAmount">Amount ($)</label>
                                <input type="number" id="expenseAmount" name="expenseAmount" min="0" step="0.01" required placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="expenseMiles">Miles (if applicable)</label>
                                <input type="number" id="expenseMiles" name="expenseMiles" min="0" placeholder="For per-mile expenses">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="expenseNotes">Description/Notes</label>
                            <textarea id="expenseNotes" name="expenseNotes" rows="2" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success">Add Expense</button>
                        <button type="button" class="btn" onclick="clearExpenseForm()">Clear Form</button>
                    </form>
                </div>
            </div>

            <div id="pl" class="tab-content">
                <div class="section">
                    <h2>Profit & Loss Statement</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showPLPeriod('current-month', this)">This Month</button>
                        <button class="btn" onclick="showPLPeriod('last-month', this)">Last Month</button>
                        <button class="btn" onclick="showPLPeriod('ytd', this)">Year to Date</button>
                    </div>
                    
                    <div class="pay-cycle-card">
                        <h3 id="plPeriodTitle">This Month</h3>
                        
                        <!-- Revenue Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #27ae60; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">REVENUE</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Load Revenue:</p>
                                    <strong id="plLoadRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Incentive Pay:</p>
                                    <strong id="plIncentivePay">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #e8f5e8;">
                                    <p><strong>Total Revenue:</strong></p>
                                    <strong id="plTotalRevenue" style="color: #27ae60;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Variable Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 5px;">VARIABLE COSTS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr 1fr 1fr;">
                                <div class="pay-cycle-stat">
                                    <p>Miles Driven:</p>
                                    <strong id="plTotalMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="plVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat" style="background: #fef9e7;">
                                    <p><strong>Gross Profit:</strong></p>
                                    <strong id="plGrossProfit" style="color: #f39c12;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fixed Costs Section -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: #e74c3c; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">OPERATING EXPENSES</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Fixed Costs:</p>
                                    <strong id="plFixedCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Truck Payment:</p>
                                    <strong id="plTruckPayment">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Manual Expenses:</p>
                                    <strong id="plManualExpenses">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Profit Section -->
                        <div style="margin-bottom: 20px;">
                            <div class="pay-cycle-stats" style="grid-template-columns: 1fr;">
                                <div class="pay-cycle-stat" style="background: #2c3e50; color: white; text-align: center;">
                                    <p style="color: #ecf0f1;"><strong>NET PROFIT:</strong></p>
                                    <strong id="plNetProfit" style="font-size: 1.5em; color: #ecf0f1;">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div>
                            <h4 style="color: #3498db; border-bottom: 1px solid #3498db; padding-bottom: 5px;">KEY METRICS</h4>
                            <div class="pay-cycle-stats" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                                <div class="pay-cycle-stat">
                                    <p>Profit per Mile:</p>
                                    <strong id="plProfitPerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit Margin:</p>
                                    <strong id="plProfitMargin">0%</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Revenue per Mile:</p>
                                    <strong id="plRevenuePerMile">$0.000</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Total Cost per Mile:</p>
                                    <strong id="plCostPerMile">$0.000</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="pay-cycle" class="tab-content">
                <div class="section">
                    <h2>Pay Cycle Preview</h2>
                    <p>Pay cycle runs Wednesday to Tuesday (midnight to midnight). Current settlement cycle ends at midnight next Tuesday.</p>
                    <div class="pay-cycle-stats">
                        <div class="pay-cycle-card">
                            <h3>Current Settlement Cycle (Next Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="currentCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="currentCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="currentCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="currentCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                        <div class="pay-cycle-card">
                            <h3>Next Settlement Cycle (Following Check)</h3>
                            <div class="pay-cycle-stats">
                                <div class="pay-cycle-stat">
                                    <p>Revenue:</p>
                                    <strong id="nextCycleRevenue">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Miles:</p>
                                    <strong id="nextCycleMiles">0</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Variable Costs:</p>
                                    <strong id="nextCycleVariableCosts">$0.00</strong>
                                </div>
                                <div class="pay-cycle-stat">
                                    <p>Profit:</p>
                                    <strong id="nextCycleProfit">$0.00</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rates" class="tab-content">
                <div class="section">
                    <h2>Mileage Compensation Rates</h2>
                    <table class="rate-table">
                        <thead>
                            <tr>
                                <th>Load Miles</th>
                                <th>Rate per Mile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>1 to 20</td><td>$2.85</td></tr>
                            <tr><td>21 to 75</td><td>$2.00</td></tr>
                            <tr><td>76 to 150</td><td>$1.85</td></tr>
                            <tr><td>151 to 275</td><td>$1.70</td></tr>
                            <tr><td>276 to 425</td><td>$1.45</td></tr>
                            <tr><td>426 to 600</td><td>$1.35</td></tr>
                            <tr><td>601 to 800</td><td>$1.28</td></tr>
                            <tr><td>801 to 1,000</td><td>$1.25</td></tr>
                            <tr><td>1,001 to 1,200</td><td>$1.20</td></tr>
                            <tr><td>1,201 to 1,800</td><td>$1.13</td></tr>
                            <tr><td>1,801 or more</td><td>$1.12</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="history" class="tab-content">
                <div class="section">
                    <h2>Load & Expense History</h2>
                    <div style="margin-bottom: 20px;">
                        <button class="btn" onclick="showHistoryType('loads', this)">Loads</button>
                        <button class="btn" onclick="showHistoryType('expenses', this)">Expenses</button>
                        <button class="btn" onclick="showHistoryType('all', this)">All</button>
                    </div>
                    <div id="historyContainer"></div>
                </div>
            </div>

            <div id="data" class="tab-content">
                <div class="section">
                    <h2>Data Management</h2>
                    <button type="button" class="btn" onclick="exportData()">Export Data</button>
                    <button type="button" class="btn" onclick="showRawData()">View Raw Data</button>
                    <button type="button" class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
                    <div style="margin-top: 10px;">
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" style="display: none;">
                        <button type="button" class="btn" onclick="document.getElementById('importFile').click()">Import Data</button>
                    </div>
                    <pre><code id="dataDisplayArea"></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
